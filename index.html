<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kanban Board</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <!-- Main Styles - –ù–æ–≤—ã–π –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –¥–∏–∑–∞–π–Ω -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/auth.css">
    <link rel="stylesheet" href="css/card.css">
    <link rel="stylesheet" href="css/filters.css">
    <link rel="stylesheet" href="css/dragdrop.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <header>
        <div class="header-content">
            <div class="header-title">
                <h1>Kanban Board</h1>
                <p class="subtitle">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º–∏ –∑–∞–¥–∞—á–∞–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ</p>
            </div>
            <div class="header-actions">
                <!-- –ü–æ–∏—Å–∫ -->
                <div class="search-container">
                    <input
                        type="search"
                        id="search-input"
                        placeholder="üîç –ü–æ–∏—Å–∫ –∑–∞–¥–∞—á..."
                        class="search-input"
                    >
                </div>
                <!-- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω -->
                <div id="auth-buttons" class="auth-buttons">
                    <button class="btn btn-outline" id="show-login-btn">–í–æ–π—Ç–∏</button>
                </div>
                <!-- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω -->
                <div id="user-profile" class="user-profile hidden">
                    <span class="user-email" id="user-email"></span>
                    <button class="btn btn-outline" id="logout-btn">–í—ã–π—Ç–∏</button>
                </div>
            </div>
        </div>
    </header>

    <!-- –ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤ -->
    <div class="filters-toolbar">
        <div class="filters-group">
            <label class="filter-checkbox">
                <input type="checkbox" id="show-all-tasks">
                <span>–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏</span>
            </label>

            <select id="priority-filter" class="filter-select">
                <option value="">–í—Å–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã</option>
                <option value="high">üî¥ –í—ã—Å–æ–∫–∏–π</option>
                <option value="medium">üü° –°—Ä–µ–¥–Ω–∏–π</option>
                <option value="low">üü¢ –ù–∏–∑–∫–∏–π</option>
            </select>

            <button id="reset-filters" class="btn btn-secondary">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
        </div>
    </div>

    <!-- Banner —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
    <div id="notification-banner" class="notification-banner hidden"></div>

    <main class="board-container">
        <div class="column" data-column-id="todo">
            <div class="column-header">
                <h2>To Do</h2>
                <span class="card-count">0</span>
            </div>
            <div class="cards-container" id="todo-cards"></div>
            <button class="add-card-btn" data-column-id="todo">
                <span>+</span> –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
            </button>
        </div>

        <div class="column" data-column-id="inProgress">
            <div class="column-header">
                <h2>In Progress</h2>
                <span class="card-count">0</span>
            </div>
            <div class="cards-container" id="inProgress-cards"></div>
            <button class="add-card-btn" data-column-id="inProgress">
                <span>+</span> –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
            </button>
        </div>

        <div class="column" data-column-id="done">
            <div class="column-header">
                <h2>Done</h2>
                <span class="card-count">0</span>
            </div>
            <div class="cards-container" id="done-cards"></div>
            <button class="add-card-btn" data-column-id="done">
                <span>+</span> –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
            </button>
        </div>
    </main>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
    <div id="auth-modal-overlay" class="modal-overlay hidden">
        <div class="modal auth-modal">
            <div class="modal-header">
                <h2 id="auth-modal-title">–í—Ö–æ–¥</h2>
                <button class="close-btn" id="close-auth-modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
            </div>
            <form id="auth-form">
                <div class="form-group">
                    <label for="auth-email">Email *</label>
                    <input
                        type="email"
                        id="auth-email"
                        name="email"
                        placeholder="your@email.com"
                        required
                        autocomplete="email"
                    >
                </div>
                <div class="form-group">
                    <label for="auth-password">–ü–∞—Ä–æ–ª—å *</label>
                    <input
                        type="password"
                        id="auth-password"
                        name="password"
                        placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤"
                        required
                        minlength="6"
                        autocomplete="current-password"
                    >
                </div>
                <div id="auth-error" class="auth-error hidden"></div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-cancel" id="auth-cancel-btn">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn btn-primary" id="auth-submit-btn">–í–æ–π—Ç–∏</button>
                </div>
            </form>
            <div class="auth-toggle">
                <span id="auth-toggle-text">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞?</span>
                <button type="button" class="btn-link" id="auth-toggle-btn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ -->
    <div id="modal-overlay" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h2 id="modal-title">–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</h2>
                <button class="close-btn" id="close-modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
            </div>
            <form id="card-form">
                <div class="form-group">
                    <label for="card-title">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ *</label>
                    <input
                        type="text"
                        id="card-title"
                        name="title"
                        placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏"
                        required
                        maxlength="100"
                    >
                </div>
                <div class="form-group">
                    <label for="card-description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea
                        id="card-description"
                        name="description"
                        placeholder="–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
                        rows="4"
                        maxlength="500"
                    ></textarea>
                </div>
                <div class="form-group">
                    <label for="card-priority">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                    <select id="card-priority" name="priority">
                        <option value="low">–ù–∏–∑–∫–∏–π</option>
                        <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="card-start-date">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</label>
                        <input type="date" id="card-start-date" name="startDate">
                    </div>
                    <div class="form-group">
                        <label for="card-end-date">–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</label>
                        <input type="date" id="card-end-date" name="endDate">
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-cancel" id="cancel-btn">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Supabase JS Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- SortableJS for Drag & Drop -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>

    <!-- Application Scripts -->
    <script src="js/config.js"></script>
    <script src="js/services/supabase.js"></script>
    <script src="js/services/authService.js"></script>
    <script src="js/services/cardService.js"></script>
    <script src="js/services/realtimeService.js"></script>
    <script src="js/utils/dateUtils.js"></script>
    <script src="js/components/auth.js"></script>
    <script src="js/components/search.js"></script>
    <script src="js/components/filters.js"></script>
    <script src="js/components/notifications.js"></script>
    <script src="js/dragDrop/sortable.js"></script>
    <script src="app.js"></script>
</body>
</html>
