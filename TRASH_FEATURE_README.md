# –ö–æ—Ä–∑–∏–Ω–∞ –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üìã –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∫–æ—Ä–∑–∏–Ω—ã –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ (–≠—Ç–∞–ø 2 –∏–∑ –ø–ª–∞–Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–æ–∫). –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–µ–ø–µ—Ä—å –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞, –∞ –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è –≤ –∫–æ—Ä–∑–∏–Ω—É –Ω–∞ 40 –¥–Ω–µ–π, –æ—Ç–∫—É–¥–∞ –∏—Ö –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **Soft Delete** - –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è –≤ –∫–æ—Ä–∑–∏–Ω—É –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
- ‚úÖ **–•—Ä–∞–Ω–µ–Ω–∏–µ 40 –¥–Ω–µ–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 40 –¥–Ω–µ–π
- ‚úÖ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º
- ‚úÖ **–û–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞
- ‚úÖ **–û–±—â–∞—è –∫–æ—Ä–∑–∏–Ω–∞** - –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –≤—Å–µ —É–¥–∞–ª—ë–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏
- ‚úÖ **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –∏–ª–∏ —É–¥–∞–ª–∏–≤—à–∏–π
- ‚úÖ **–§–∏–ª—å—Ç—Ä—ã –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** - —É–¥–æ–±–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–æ—Ä–∑–∏–Ω–µ
- ‚úÖ **Realtime —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- ‚úÖ **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–ª–∞–¥–µ–ª—å—Ü–µ, —É–¥–∞–ª–∏–≤—à–µ–º, –¥–∞—Ç–∞—Ö
- ‚úÖ **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–∫—Å–∞—Ü–∏—è –¥–∞—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:

```
/home/sernatalia/kanban/
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ trashService.js         # –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ—Ä–∑–∏–Ω–æ–π
‚îÇ   ‚îî‚îÄ‚îÄ components/
‚îÇ       ‚îî‚îÄ‚îÄ trash.js                # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–æ—Ä–∑–∏–Ω—ã
‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îî‚îÄ‚îÄ trash.css                   # –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ—Ä–∑–∏–Ω—ã
‚îî‚îÄ‚îÄ docs/
    ‚îú‚îÄ‚îÄ MIGRATION_TRASH.md          # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏
    ‚îú‚îÄ‚îÄ MANUAL_MIGRATION_STEPS.md   # –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ TESTING_CHECKLIST.md        # –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    ‚îî‚îÄ‚îÄ TRASH_FEATURE_README.md     # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

### –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

```
‚îú‚îÄ‚îÄ setup-database.sql              # –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–±–ª–∏—Ü–∞ –∫–æ—Ä–∑–∏–Ω—ã –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îú‚îÄ‚îÄ config.js                   # –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ TABLES.TRASH
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cardService.js          # deleteCard() –∏—Å–ø–æ–ª—å–∑—É–µ—Ç soft delete
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ realtimeService.js      # –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–æ—Ä–∑–∏–Ω—É
‚îÇ   ‚îî‚îÄ‚îÄ app.js                      # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∫–æ—Ä–∑–∏–Ω—ã
‚îî‚îÄ‚îÄ index.html                      # –ö–Ω–æ–ø–∫–∞ –∏ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ—Ä–∑–∏–Ω—ã
```

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:

```
‚îú‚îÄ‚îÄ migration.sql                   # –ß–∏—Å—Ç—ã–π SQL –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ apply_migration.sh              # Bash —Å–∫—Ä–∏–ø—Ç (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞ —Å–µ—Ç–∏)
‚îú‚îÄ‚îÄ apply_migration.py              # Python —Å–∫—Ä–∏–ø—Ç (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞ —Å–µ—Ç–∏)
‚îî‚îÄ‚îÄ apply_migration.js              # Node.js —Å–∫—Ä–∏–ø—Ç (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞ —Å–µ—Ç–∏)
```

## üóÑÔ∏è –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### –ù–æ–≤–æ–µ –ø–æ–ª–µ –≤ kanban_cards:

```sql
completed_at TIMESTAMPTZ  -- –î–∞—Ç–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –≤ –∫–æ–ª–æ–Ω–∫—É Done
```

–¢—Ä–∏–≥–≥–µ—Ä `set_completed_at()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç/—Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —ç—Ç–æ –ø–æ–ª–µ –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ –∫–∞—Ä—Ç–æ—á–∫–∏.

### –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ kanban_trash:

```sql
CREATE TABLE kanban_trash (
  id UUID PRIMARY KEY,
  card_id UUID NOT NULL,              -- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π ID –∫–∞—Ä—Ç–æ—á–∫–∏

  -- –ö–æ–ø–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–∫–∏
  title VARCHAR(100) NOT NULL,
  description TEXT,
  column_id VARCHAR(20) NOT NULL,
  priority VARCHAR(10) NOT NULL,
  start_date TIMESTAMPTZ,
  end_date TIMESTAMPTZ,
  completed_at TIMESTAMPTZ,

  -- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω–∏—è
  user_id UUID NOT NULL,              -- –í–ª–∞–¥–µ–ª–µ—Ü –∫–∞—Ä—Ç–æ—á–∫–∏
  deleted_by UUID NOT NULL,           -- –ö—Ç–æ —É–¥–∞–ª–∏–ª
  deleted_at TIMESTAMPTZ DEFAULT NOW(),
  auto_delete_at TIMESTAMPTZ DEFAULT (NOW() + INTERVAL '40 days'),

  created_at TIMESTAMPTZ NOT NULL,
  updated_at TIMESTAMPTZ NOT NULL
);
```

### RLS –ø–æ–ª–∏—Ç–∏–∫–∏:

1. **"–ö–æ—Ä–∑–∏–Ω–∞ –≤–∏–¥–Ω–∞ –≤—Å–µ–º"** - –≤—Å–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –≤—Å—é –∫–æ—Ä–∑–∏–Ω—É
2. **"–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É"** - –ª—é–±–æ–π –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É –≤ –∫–æ—Ä–∑–∏–Ω—É
3. **"–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫"** - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –∏–ª–∏ —É–¥–∞–ª–∏–≤—à–∏–π

### –ò–Ω–¥–µ–∫—Å—ã:

- `idx_trash_auto_delete_at` - –¥–ª—è –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏—è
- `idx_trash_deleted_by` - –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —É–¥–∞–ª–∏–≤—à–µ–º—É
- `idx_trash_user_id` - –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –≤–ª–∞–¥–µ–ª—å—Ü—É
- `idx_trash_deleted_at` - –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –¥–∞—Ç–µ

## üîß API —Å–µ—Ä–≤–∏—Å–æ–≤

### TrashService

```javascript
// –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É –≤ –∫–æ—Ä–∑–∏–Ω—É
await TrashService.moveToTrash(cardId)

// –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
await TrashService.restoreFromTrash(trashId)

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
await TrashService.getAllTrash()

// –û–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ —É–¥–∞–ª–∏—Ç—å –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
await TrashService.permanentDelete(trashId)

// –ú–∞—Å—Å–æ–≤–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
await TrashService.bulkMoveToTrash([cardId1, cardId2, ...])

// –ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–æ –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏—è
TrashService.getDaysUntilAutoDelete(autoDeleteAt)

// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞—Ç—É —É–¥–∞–ª–µ–Ω–∏—è
TrashService.formatDeletedDate(deletedAt)
```

### TrashComponent

```javascript
// –û—Ç–∫—Ä—ã—Ç—å –∫–æ—Ä–∑–∏–Ω—É
TrashComponent.open()

// –ó–∞–∫—Ä—ã—Ç—å –∫–æ—Ä–∑–∏–Ω—É
TrashComponent.close()

// –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ—Ä–∑–∏–Ω—ã
await TrashComponent.loadTrash()

// –û–±—Ä–∞–±–æ—Ç–∫–∞ Realtime —Å–æ–±—ã—Ç–∏–π
TrashComponent.handleRealtimeInsert(payload)
TrashComponent.handleRealtimeDelete(payload)
```

## üé® UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –ö–Ω–æ–ø–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã (Header)

```html
<button class="btn btn-outline" id="trashBtn" title="–ö–æ—Ä–∑–∏–Ω–∞">
  üóëÔ∏è –ö–æ—Ä–∑–∏–Ω–∞
</button>
```

–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∞ –≤ header —Å–ø—Ä–∞–≤–∞ –æ—Ç –∫–Ω–æ–ø–∫–∏ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏".

### –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ—Ä–∑–∏–Ω—ã

–í–∫–ª—é—á–∞–µ—Ç:
- **–ó–∞–≥–æ–ª–æ–≤–æ–∫**: "üóëÔ∏è –ö–æ—Ä–∑–∏–Ω–∞"
- **–§–∏–ª—å—Ç—Ä—ã**:
  - –ü–æ–∫–∞–∑–∞—Ç—å: "–í—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏" / "–¢–æ–ª—å–∫–æ –º–æ–∏"
  - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: "–ü–æ –¥–∞—Ç–µ —É–¥–∞–ª–µ–Ω–∏—è" / "–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é"
- **–°–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫** —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:
  - –ù–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
  - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç (—Ü–≤–µ—Ç–Ω–æ–π –±–µ–π–¥–∂)
  - –í–ª–∞–¥–µ–ª–µ—Ü (–Ω–∏–∫–Ω–µ–π–º)
  - –ö—Ç–æ —É–¥–∞–ª–∏–ª (–Ω–∏–∫–Ω–µ–π–º)
  - –î–∞—Ç–∞ —É–¥–∞–ª–µ–Ω–∏—è
  - –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ X –¥–Ω–µ–π
  - –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π (–µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–∞–≤–∞)

## üîÑ Workflow

### –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–£–¥–∞–ª–∏—Ç—å" –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ
2. `CardService.deleteCard()` –≤—ã–∑—ã–≤–∞–µ—Ç `TrashService.moveToTrash()`
3. –î–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `kanban_trash`
4. –ö–∞—Ä—Ç–æ—á–∫–∞ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `kanban_cards`
5. Realtime —Å–æ–±—ã—Ç–∏–µ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
6. –ö–∞—Ä—Ç–æ—á–∫–∞ –∏—Å—á–µ–∑–∞–µ—Ç —Å –¥–æ—Å–∫–∏

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–æ—Ä–∑–∏–Ω—É
2. –ù–∞–∂–∏–º–∞–µ—Ç "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å" –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ
3. `TrashService.restoreFromTrash()` –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É
4. –î–∞–Ω–Ω—ã–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ `kanban_cards`
5. –ó–∞–ø–∏—Å—å —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ `kanban_trash`
6. Realtime —Å–æ–±—ã—Ç–∏–µ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
7. –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ –¥–æ—Å–∫–µ

### –û–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–£–¥–∞–ª–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞"
2. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: "–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!"
3. `TrashService.permanentDelete()` —É–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
4. Realtime —Å–æ–±—ã—Ç–∏–µ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
5. –ö–∞—Ä—Ç–æ—á–∫–∞ –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã –Ω–∞–≤—Å–µ–≥–¥–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 40 –¥–Ω–µ–π:

–§—É–Ω–∫—Ü–∏—è `auto_delete_old_trash()` —É–¥–∞–ª—è–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ —É –∫–æ—Ç–æ—Ä—ã—Ö `auto_delete_at <= NOW()`.

**–í–∞–∂–Ω–æ**: –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å cron-–∑–∞–¥–∞—á—É –∏–ª–∏ pg_cron –≤ Supabase.

## üìä Realtime —Å–æ–±—ã—Ç–∏—è

### INSERT –≤ –∫–æ—Ä–∑–∏–Ω—É:

```javascript
// –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–∞—Ä—Ç–æ—á–∫–∏
{
  event: 'INSERT',
  table: 'kanban_trash',
  payload: { new: { id, card_id, title, ... } }
}
```

### DELETE –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã:

```javascript
// –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–ª–∏ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–º —É–¥–∞–ª–µ–Ω–∏–∏
{
  event: 'DELETE',
  table: 'kanban_trash',
  payload: { old: { id, card_id, title, ... } }
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Row Level Security (RLS):

- ‚úÖ –í–∫–ª—é—á–µ–Ω –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `kanban_trash`
- ‚úÖ –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å –∫–æ—Ä–∑–∏–Ω—É (SELECT)
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –∏–ª–∏ —É–¥–∞–ª–∏–≤—à–∏–π (DELETE)
- ‚úÖ –û–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ —É–¥–∞–ª—è—Ç—å –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –∏–ª–∏ —É–¥–∞–ª–∏–≤—à–∏–π

### –ü—Ä–æ–≤–µ—Ä–∫–∏ –≤ –∫–æ–¥–µ:

```javascript
// –í TrashService.moveToTrash()
if (card.user_id !== currentUser.id) {
    return { error: '–í—ã –º–æ–∂–µ—Ç–µ —É–¥–∞–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∫–∞—Ä—Ç–æ—á–∫–∏' };
}

// –í TrashService.restoreFromTrash() –∏ permanentDelete()
if (trashItem.user_id !== currentUser.id &&
    trashItem.deleted_by !== currentUser.id) {
    return { error: '–ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —ç—Ç–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏' };
}
```

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –£–¥–∞–ª–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

```javascript
// –£–¥–∞–ª–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
const { error } = await CardService.deleteCard('card-123');
if (error) {
    console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:', error);
}

// –û—Ç–∫—Ä—ã—Ç—å –∫–æ—Ä–∑–∏–Ω—É
TrashComponent.open();

// –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
const { data, error } = await TrashService.restoreFromTrash('trash-456');
if (!error) {
    console.log('–ö–∞—Ä—Ç–æ—á–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞:', data);
}
```

### –ü—Ä–∏–º–µ—Ä 2: –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ

```javascript
// –£–¥–∞–ª–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç–æ—á–µ–∫
const cardIds = ['card-1', 'card-2', 'card-3'];
const results = await TrashService.bulkMoveToTrash(cardIds);

console.log(`–£—Å–ø–µ—à–Ω–æ: ${results.success}, –û—à–∏–±–æ–∫: ${results.failed}`);
```

### –ü—Ä–∏–º–µ—Ä 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–æ –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏—è

```javascript
// –ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
const { data: trashItems } = await TrashService.getAllTrash();

trashItems.forEach(item => {
    const daysLeft = TrashService.getDaysUntilAutoDelete(item.auto_delete_at);
    console.log(`${item.title}: ${daysLeft} –¥–Ω–µ–π –¥–æ —É–¥–∞–ª–µ–Ω–∏—è`);
});
```

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 40 –¥–Ω–µ–π** —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ cron-–∑–∞–¥–∞—á–∏
2. **–ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ Supabase** –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω —Å–µ—Ç–µ–≤—ã–º–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏
3. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø–æ–∑–∏—Ü–∏—é** –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–∫–∞—Ä—Ç–æ—á–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –Ω–∞—á–∞–ª–æ –∫–æ–ª–æ–Ω–∫–∏)

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–≠—Ç–∞–ø 3)

–°–ª–µ–¥—É—é—â–∏–º —ç—Ç–∞–ø–æ–º –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è **–º–∞—Å—Å–æ–≤–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ –∏–∑ Done –ø–æ –¥–∞—Ç–∞–º**:

- –ö–Ω–æ–ø–∫–∞ "–û—á–∏—Å—Ç–∏—Ç—å Done" –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∫–æ–ª–æ–Ω–∫–∏ Done
- –î–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ –ø–µ—Ä–∏–æ–¥–∞ (3 –¥–Ω—è, –Ω–µ–¥–µ–ª—è, –º–µ—Å—è—Ü, –∫–∞—Å—Ç–æ–º–Ω—ã–π)
- –ü—Ä–µ–≤—å—é —É–¥–∞–ª—è–µ–º—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
- –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä —É–¥–∞–ª–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ—Ä–∑–∏–Ω—ã

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –Ω–∞ –æ—à–∏–±–∫–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –ë–î –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Realtime –≤–∫–ª—é—á–µ–Ω –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `kanban_trash`
4. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –æ—á–∏—Å—Ç–∫–æ–π –∫—ç—à–∞ (Ctrl+Shift+R)

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- `MANUAL_MIGRATION_STEPS.md` - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –º–∏–≥—Ä–∞—Ü–∏–∏
- `TESTING_CHECKLIST.md` - –ü–æ–ª–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (50+ —Ç–µ—Å—Ç–æ–≤)
- `MIGRATION_TRASH.md` - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏
- `migration.sql` - –ß–∏—Å—Ç—ã–π SQL –∫–æ–¥ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

---

**–í–µ—Ä—Å–∏—è**: 1.0.0
**–î–∞—Ç–∞**: 13 —è–Ω–≤–∞—Ä—è 2026
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
